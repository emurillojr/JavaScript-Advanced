<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        
        <button>Call Promise</button>
        
        <div class="log"></div>
        
         <script type="text/javascript">            
            'use strict';
            
            document.querySelector('button').addEventListener('click', testPromise);
            
            var log = document.querySelector('div.log');
             
            function testPromise() {
                /* the new Promise function takes in a function with a resolve callback and a reject call back 
                 * from the Promise function.
                 * 
                 * So you can determine in your code when to resolve or reject the promise
                 */
                var promise = new Promise(function(resolve, reject) {
                    // do a thing, possibly async, thenâ€¦

                    var result = Math.round( Math.random() ); // Will generate a random number 0 or 1
                    console.log(result);
                    if ( result ) {
                      resolve("Stuff worked!");
                    }
                    else {
                      reject(Error("It broke"));
                    }
                });


                /* once you have the promise object you can you the then function to handle the resolve or the rejected
                 * promise
                 */
                promise.then(function(result) {
                    window.log.insertAdjacentHTML('beforeend', result +'<br/>');
                    console.log(result); // "Stuff worked!"
                }, function(err) {
                    window.log.insertAdjacentHTML('beforeend', err +'<br/>');
                    console.log(err); // Error: "It broke"
                });
            }
            
        </script>
    </body>
</html>
