<!DOCTYPE html>
<html>
    <head>
        <title> JavaScript - Lab4 </title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>

        <h1> Agreement Page </h1>
        <form name="mainform" id="mainform" action="" class="basic-grey">
            <div id="content" class="contentBox">
                <fieldset>

                    <legend>Personal information</legend> 
                    <label for="fullname">Name:</label> 
                    <input id="fullname" name="name" type="text" size="30" placeholder="Full name" />
                    <span id="fullname_err"></span>

                    <label for="email">E-mail:</label> 
                    <input id="email" name="email" type="text" size="30" placeholder="sample@email.com" />
                    <span  id="email_err"></span>

                    <label for="phone">Phone:</label> 
                    <input id="phone" name="phone" type="text" size="30" placeholder="xxx-xxx-xxxx" />
                    <span id="phone_err"></span>

                    <label for="description">Description:</label> 
                    <textarea id="description"></textarea>
                    <span id="description_err"></span>

                </fieldset>
            </div>


            <div id="section2" class="contentBox">

                <p> Please read and scroll the following document and agree to the terms and conditions. </p>

                <div class="scrollBoxWrapper">
                    <div id="agreeScroll" class="scrollBox">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla tincidunt libero sed mi egestas cursus. Mauris turpis odio, lacinia sed purus a, tincidunt tincidunt tortor. Ut molestie diam non lorem aliquet cursus. Suspendisse potenti. Phasellus in odio enim. Sed volutpat, purus ac laoreet pellentesque, sapien urna varius ipsum, eget volutpat nulla neque at felis. Curabitur blandit vitae nulla vitae consectetur. Pellentesque pellentesque orci leo, a pretium ante cursus vitae. Vestibulum venenatis vehicula aliquet. Pellentesque imperdiet aliquet odio quis viverra. Aliquam tincidunt aliquet euismod. In id ornare nunc, quis sodales nunc. Aliquam venenatis sed lacus eget tristique.
                        </p>
                        <p>
                            Nullam at odio eu urna dictum consectetur. Proin vitae vulputate odio, viverra imperdiet est. Aenean quam lectus, vehicula vitae euismod nec, luctus eget elit. Quisque consectetur non nisi tempor tempus. Etiam eleifend ipsum neque, sit amet cursus lectus feugiat sit amet. Curabitur laoreet, est suscipit imperdiet consequat, tortor diam venenatis mi, eget convallis est sem quis felis. Sed suscipit lorem scelerisque magna porttitor auctor. Aenean eget dui dignissim, iaculis tortor ut, blandit orci.
                        </p>
                        <p>
                            Duis iaculis sem neque, vitae imperdiet velit fringilla et. Nullam nunc justo, venenatis sit amet justo vel, convallis scelerisque metus. Quisque nec sodales lectus. Praesent sagittis augue sed dui euismod elementum. Maecenas vel nulla id massa pulvinar facilisis. Quisque aliquam nulla velit. In viverra tempus erat vitae egestas.
                        </p>
                        <p>
                            Nunc nec dapibus ante. Nullam dictum ut sem mollis pulvinar. Quisque tincidunt non erat vel convallis. Ut metus nibh, euismod in ultricies vel, congue eget metus. Sed laoreet lacinia sollicitudin. Mauris dictum diam et gravida ullamcorper. Fusce libero leo, ultricies pellentesque justo vitae, adipiscing dictum metus. Aenean convallis elit a iaculis imperdiet.
                        </p>
                        <p>
                            Cras aliquet neque et rhoncus mollis. Ut rhoncus elit neque, sit amet ullamcorper purus venenatis quis. Etiam molestie, libero nec commodo vestibulum, libero erat consequat lorem, eu elementum quam lacus et eros. Cras vitae lacus id felis euismod ullamcorper. Cras et leo quis tortor molestie vehicula. Sed lobortis mauris quis eleifend posuere. Suspendisse iaculis ultrices massa. Vivamus a libero vel mauris feugiat elementum. 
                        </p>
                    </div>
                </div>

                <label for="agree"> <input type="radio" id="agree" name="agreeForm" value="I Agree" disabled="disabled" />  I <strong>agree</strong> to the terms and conditions of the document</label>
                <br />
                <label for="notagree"> <input type="radio" id="notagree" name="agreeForm" value="I Do Not Agree" disabled="disabled" />  I <strong>do not agree</strong> to the terms and conditions of the document</label>

                <br /><br />
                <input type="submit" id="submitAgreement" value="Continue" />
            </div>
        </form>

        <!-- created div to hold data -->
        <div id ="data">

        </div>


        <script type="text/javascript">

            var objDiv = document.querySelector('div.scrollBox');

            objDiv.addEventListener('scroll', checkPosition);

            function checkPosition() {
                console.clear();
                console.log(objDiv.scrollTop);
                console.log(objDiv.scrollHeight);
                console.log(objDiv.offsetHeight);

                if (objDiv.scrollTop == (objDiv.scrollHeight - objDiv.offsetHeight)) {
                    agree.disabled = false;
                    notagree.disabled = false;
                    console.log('bottom');
                }
            }
            // We use the form tag to select it on the page
            var form = document.querySelector('form');
            // To the form we add a function so when the form is submmited we run checkForm
            form.addEventListener('submit', checkForm);


            // just like variables form names are case sensitive.
            function checkForm(e) {

                e.preventDefault();
                var validData = true;

                var nameLabel = document.querySelector('#content > fieldset > label:nth-child(2)');
                var fullname = document.querySelector('#fullname');
                var emailLabel = document.querySelector('#content > fieldset > label:nth-child(5)');
                var email = document.querySelector('#email');
                var phoneLabel = document.querySelector('#content > fieldset > label:nth-child(8)');
                var phone = document.querySelector('#phone');
                var descriptionLabel = document.querySelector('#content > fieldset > label:nth-child(11)');
                var description = document.querySelector('#description');
                var agreeLabel = document.querySelector('#section2 > label:nth-child(3)');
                var agreebutton = document.querySelector('#agree');
                var notagreeLabel = document.querySelector('#section2 > label:nth-child(5)');
                var notagree = document.querySelector('#notagree');
                var dataDiv = document.querySelector('#data');


                console.log('form submited');

                if (email.value === '')
                {
                    emailLabel.classList.add('error');
                    validData = false;
                } else
                {
                    emailLabel.classList.remove('error');
                }

                if (fullname.value === '') {
                    nameLabel.classList.add('error');
                    validData = false;
                } else
                {
                    nameLabel.classList.remove('error');
                }

                if (phone.value === '') {
                    phoneLabel.classList.add('error');
                    validData = false;
                } else
                {
                    phoneLabel.classList.remove('error');
                }

                if (description.value === '') {
                    descriptionLabel.classList.add('error');
                    validData = false;
                } else
                {
                    descriptionLabel.classList.remove('error');
                }

                if (agreebutton.checked === false && notagree.checked === false) {
                    agreeLabel.classList.add('error');
                    notagreeLabel.classList.add('error');
                    validData = false;
                } else {

                    agreeLabel.classList.remove('error');
                    notagreeLabel.classList.remove('error');
                }

                if (validData === true)
                {
                    var html = '';
                    html += '<p>Name: ' + fullname.value + '</p>' +
                            '<p>Email: ' + email.value + '</p>' +
                            '<p>Phone Number: ' + phone.value + '</p>' +
                            '<p>Description: ' + description.value + '</p>';

                    if (agreebutton.checked === true)
                    {
                        html += '<p>Choice: ' + agreebutton.value + '</p>';
                    }

                    if (notagree.checked === true)
                    {
                        html += '<p>Choice: ' + notagree.value + '</p>';
                    }
                    dataDiv.innerHTML += html;

                    form.classList.remove('show');
                    form.classList.add('hide');

                }

            }

        </script>

    </body>
</html>